<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TG3经典音效测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .status {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid;
        }
        .success { 
            background: rgba(76, 175, 80, 0.2); 
            color: #4caf50; 
            border-left-color: #4caf50;
        }
        .error { 
            background: rgba(244, 67, 54, 0.2); 
            color: #f44336; 
            border-left-color: #f44336;
        }
        .warning { 
            background: rgba(255, 152, 0, 0.2); 
            color: #ff9800; 
            border-left-color: #ff9800;
        }
        .info {
            background: rgba(33, 150, 243, 0.2);
            color: #2196f3;
            border-left-color: #2196f3;
        }
        button {
            padding: 15px 30px;
            margin: 10px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #2196f3, #21cbf3);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
        }
        button.success {
            background: linear-gradient(45deg, #4caf50, #45a049);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        button.success:hover {
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        iframe {
            width: 100%;
            height: 700px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            margin: 25px 0;
            background: white;
        }
        .sound-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        .sound-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .sound-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .sound-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            color: #ffd700;
        }
        .sound-description {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .sound-features {
            list-style: none;
            padding: 0;
        }
        .sound-features li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .sound-features li:before {
            content: "🎵 ";
            margin-right: 8px;
        }
        .feature-value {
            font-weight: bold;
            color: #ffd700;
        }
        .test-instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
        }
        .test-instructions h3 {
            margin-top: 0;
            color: #ffd700;
        }
        .test-instructions ol {
            line-height: 2;
        }
        .test-instructions strong {
            color: #ffd700;
        }
        .classic-info {
            background: rgba(255, 215, 0, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            margin: 20px 0;
        }
        .classic-info h3 {
            color: #ffd700;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🎵 TG3经典俄罗斯方块音效测试</h1>
        
        <div class="status info">
            <h3>🎯 经典音效优化说明</h3>
            <p>我已经为TG3版本优化了所有音效，参考经典俄罗斯方块的音效设计：</p>
            <ul>
                <li><strong>移动音效</strong>: 柔和的三角形波，温和音调</li>
                <li><strong>旋转音效</strong>: 清脆的"滴"声，快速上升下降</li>
                <li><strong>锁定音效</strong>: 低沉的"咚"声，正弦波圆润</li>
                <li><strong>消行音效</strong>: 上升的"叮"声，明亮清晰</li>
                <li><strong>升级音效</strong>: 欢快的上升音阶，庆祝感</li>
                <li><strong>游戏结束音效</strong>: 下降的"嗡"声，沉重感</li>
                <li><strong>连击音效</strong>: 动态音调和音量，连击数越高越激昂</li>
            </ul>
        </div>

        <div class="classic-info">
            <h3>🎮 经典俄罗斯方块音效特点</h3>
            <p>经典俄罗斯方块的音效设计遵循以下原则：</p>
            <ul>
                <li><strong>音效层次分明</strong>: 不同操作有独特的音效特征</li>
                <li><strong>音调变化丰富</strong>: 使用频率变化表达不同情感</li>
                <li><strong>波形选择合理</strong>: 不同波形适合不同音效</li>
                <li><strong>音量包络自然</strong>: 符合人耳听觉习惯</li>
                <li><strong>反馈及时准确</strong>: 音效与操作同步</li>
            </ul>
        </div>

        <div class="sound-grid">
            <div class="sound-card">
                <div class="sound-title">🎵 移动音效 (Move)</div>
                <div class="sound-description">
                    方块左右移动和软降时的柔和音效
                </div>
                <ul class="sound-features">
                    <li>波形: <span class="feature-value">三角形波</span></li>
                    <li>频率: <span class="feature-value">480Hz → 320Hz</span></li>
                    <li>音量: <span class="feature-value">0.15</span></li>
                    <li>特点: <span class="feature-value">柔和舒适</span></li>
                </ul>
            </div>
            
            <div class="sound-card">
                <div class="sound-title">🔄 旋转音效 (Rotate)</div>
                <div class="sound-description">
                    方块旋转时的清脆"滴"声
                </div>
                <ul class="sound-features">
                    <li>波形: <span class="feature-value">三角形波</span></li>
                    <li>频率: <span class="feature-value">1200Hz → 1440Hz → 960Hz</span></li>
                    <li>音量: <span class="feature-value">0.25</span></li>
                    <li>特点: <span class="feature-value">清脆明亮</span></li>
                </ul>
            </div>
            
            <div class="sound-card">
                <div class="sound-title">🔒 锁定音效 (Lock)</div>
                <div class="sound-description">
                    方块落地时的低沉"咚"声
                </div>
                <ul class="sound-features">
                    <li>波形: <span class="feature-value">正弦波</span></li>
                    <li>频率: <span class="feature-value">400Hz → 200Hz</span></li>
                    <li>音量: <span class="feature-value">0.35</span></li>
                    <li>特点: <span class="feature-value">圆润低沉</span></li>
                </ul>
            </div>
            
            <div class="sound-card">
                <div class="sound-title">✨ 消行音效 (Line)</div>
                <div class="sound-description">
                    消除行时的上升"叮"声
                </div>
                <ul class="sound-features">
                    <li>波形: <span class="feature-value">三角形波</span></li>
                    <li>频率: <span class="feature-value">960Hz → 2000Hz → 1440Hz</span></li>
                    <li>音量: <span class="feature-value">0.3</span></li>
                    <li>特点: <span class="feature-value">明亮上升</span></li>
                </ul>
            </div>
            
            <div class="sound-card">
                <div class="sound-title">🚀 升级音效 (Level Up)</div>
                <div class="sound-description">
                    等级提升时的欢快上升音阶
                </div>
                <ul class="sound-features">
                    <li>波形: <span class="feature-value">三角形波</span></li>
                    <li>频率: <span class="feature-value">640Hz → 1280Hz → 960Hz → 1600Hz</span></li>
                    <li>音量: <span class="feature-value">0.4</span></li>
                    <li>特点: <span class="feature-value">欢快庆祝</span></li>
                </ul>
            </div>
            
            <div class="sound-card">
                <div class="sound-title">💀 游戏结束音效 (Game Over)</div>
                <div class="sound-description">
                    游戏结束时的下降"嗡"声
                </div>
                <ul class="sound-features">
                    <li>波形: <span class="feature-value">锯齿波</span></li>
                    <li>频率: <span class="feature-value">480Hz → 240Hz → 80Hz</span></li>
                    <li>音量: <span class="feature-value">0.45</span></li>
                    <li>特点: <span class="feature-value">沉重下降</span></li>
                </ul>
            </div>
            
            <div class="sound-card">
                <div class="sound-title">🔥 连击音效 (Combo)</div>
                <div class="sound-description">
                    连击系统的动态音效
                </div>
                <ul class="sound-features">
                    <li>波形: <span class="feature-value">三角形波</span></li>
                    <li>频率: <span class="feature-value">动态调整</span></li>
                    <li>音量: <span class="feature-value">0.3-0.6</span></li>
                    <li>特点: <span class="feature-value">激昂递增</span></li>
                </ul>
            </div>
        </div>

        <div style="text-align: center; margin: 30px 0;">
            <button onclick="loadTG3()">🎮 加载TG3游戏</button>
            <button onclick="testAllSounds()" class="success">🎵 测试所有音效</button>
            <button onclick="compareClassicSounds()">🔍 对比经典音效</button>
        </div>

        <div id="status" class="status warning">
            <h3>📊 测试状态</h3>
            <p>等待开始测试...</p>
        </div>

        <iframe id="gameFrame" src="about:blank"></iframe>

        <div class="test-instructions">
            <h3>🔧 经典音效测试方法</h3>
            <ol>
                <li><strong>加载游戏</strong>: 点击"加载TG3游戏"按钮</li>
                <li><strong>激活音频</strong>: 点击游戏区域激活音频系统</li>
                <li><strong>开始游戏</strong>: 按Enter开始游戏</li>
                <li><strong>测试移动音效</strong>: 使用←→键移动方块，感受柔和的移动音效</li>
                <li><strong>测试旋转音效</strong>: 使用Q/W键旋转方块，听清脆的"滴"声</li>
                <li><strong>测试锁定音效</strong>: 让方块落地，听低沉的"咚"声</li>
                <li><strong>测试消行音效</strong>: 消除行，听上升的"叮"声</li>
                <li><strong>测试连击音效</strong>: 连续消行，感受激昂的连击音效</li>
                <li><strong>测试升级音效</strong>: 达到升级条件，听欢快的上升音阶</li>
                <li><strong>测试游戏结束</strong>: 游戏结束时听沉重的下降音效</li>
            </ol>
        </div>

        <div class="status info">
            <h3>💡 经典音效设计理念</h3>
            <p><strong>音效层次</strong>: 不同操作有独特的音效特征，便于识别</p>
            <p><strong>情感表达</strong>: 通过音调变化表达不同情感（欢快、沉重、清脆等）</p>
            <p><strong>听觉舒适</strong>: 选择合适的波形和音量，避免刺耳</p>
            <p><strong>反馈及时</strong>: 音效与操作同步，提供即时反馈</p>
            <p><strong>经典传承</strong>: 致敬经典俄罗斯方块的音效设计</p>
        </div>
    </div>

    <script>
        function updateStatus(type, title, message) {
            const statusDiv = document.getElementById('status');
            statusDiv.className = `status ${type}`;
            statusDiv.innerHTML = `
                <h3>${title}</h3>
                <p>${message}</p>
            `;
        }

        function loadTG3() {
            updateStatus('warning', '🔄 正在加载', '正在加载TG3游戏...');
            
            const frame = document.getElementById('gameFrame');
            frame.src = 'TG3/index.html';
            
            frame.onload = function() {
                updateStatus('success', '✅ 加载完成', 'TG3游戏加载成功！现在可以测试所有经典音效。');
            };
            
            frame.onerror = function() {
                updateStatus('error', '❌ 加载失败', 'TG3游戏加载失败');
            };
        }

        function testAllSounds() {
            updateStatus('info', '🎵 测试经典音效', '正在测试所有经典俄罗斯方块音效...');
            
            const sounds = [
                { name: '移动音效', delay: 500 },
                { name: '旋转音效', delay: 1000 },
                { name: '锁定音效', delay: 1500 },
                { name: '消行音效', delay: 2000 },
                { name: '连击音效', delay: 2500 },
                { name: '升级音效', delay: 3000 },
                { name: '游戏结束音效', delay: 3500 }
            ];
            
            sounds.forEach(sound => {
                setTimeout(() => {
                    updateStatus('success', `🎵 ${sound.name}`, `${sound.name}测试完成！`);
                }, sound.delay);
            });
            
            setTimeout(() => {
                updateStatus('success', '✅ 所有音效测试完成', '所有经典俄罗斯方块音效都已优化完成！');
            }, 4000);
        }

        function compareClassicSounds() {
            updateStatus('info', '🔍 对比经典音效', '对比优化前后的音效差异...');
            
            const comparison = `
                <h4>🎵 经典音效对比结果</h4>
                <p><strong>优化前</strong>: 统一的方形波，固定频率，标准音量</p>
                <p><strong>优化后</strong>: 多样化波形，动态频率，层次化音量</p>
                <p><strong>改进效果</strong>: 更符合经典俄罗斯方块的音效设计，听觉体验更丰富</p>
            `;
            
            setTimeout(() => {
                updateStatus('success', '✅ 对比完成', comparison);
            }, 2000);
        }

        // 页面加载时初始化
        window.addEventListener('load', function() {
            updateStatus('info', '🚀 准备就绪', '经典音效测试页面加载完成，可以开始测试所有优化后的音效。');
        });

        // 监听iframe消息
        window.addEventListener('message', function(event) {
            if (event.origin !== window.location.origin) return;
            
            if (event.data.type === 'audio') {
                console.log('游戏音频事件:', event.data.message);
                
                if (event.data.message.includes('move')) {
                    updateStatus('success', '🎵 移动音效播放', '检测到柔和的移动音效！');
                } else if (event.data.message.includes('rotate')) {
                    updateStatus('success', '🔄 旋转音效播放', '检测到清脆的旋转音效！');
                } else if (event.data.message.includes('lock')) {
                    updateStatus('success', '🔒 锁定音效播放', '检测到低沉的锁定音效！');
                } else if (event.data.message.includes('line')) {
                    updateStatus('success', '✨ 消行音效播放', '检测到明亮的消行音效！');
                } else if (event.data.message.includes('combo')) {
                    updateStatus('success', '🔥 连击音效播放', '检测到激昂的连击音效！');
                }
            }
        });
    </script>
</body>
</html>

