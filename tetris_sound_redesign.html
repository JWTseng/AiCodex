<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>俄罗斯方块音效重新设计方案</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .section {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .section h2 {
            color: #ffd700;
            margin-top: 0;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
            padding-bottom: 10px;
        }
        .design-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .design-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .design-title {
            font-size: 18px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 15px;
            text-align: center;
        }
        .design-content {
            line-height: 1.6;
        }
        .design-content ul {
            padding-left: 20px;
        }
        .design-content li {
            margin: 8px 0;
        }
        .highlight {
            background: rgba(255, 215, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffd700;
            margin: 15px 0;
        }
        .highlight h3 {
            color: #ffd700;
            margin-top: 0;
        }
        .info-box {
            background: rgba(33, 150, 243, 0.2);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
        }
        .info-box h3 {
            color: #2196f3;
            margin-top: 0;
        }
        .warning-box {
            background: rgba(255, 152, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ff9800;
            margin: 15px 0;
        }
        .warning-box h3 {
            color: #ff9800;
            margin-top: 0;
        }
        .success-box {
            background: rgba(76, 175, 80, 0.2);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
            margin: 15px 0;
        }
        .success-box h3 {
            color: #4caf50;
            margin-top: 0;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .comparison-table th {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            font-weight: bold;
        }
        .comparison-table td {
            background: rgba(255, 255, 255, 0.1);
        }
        .new-design {
            background: rgba(76, 175, 80, 0.2) !important;
            color: #4caf50 !important;
            font-weight: bold;
        }
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎵 俄罗斯方块音效重新设计方案</h1>
        
        <div class="warning-box">
            <h3>⚠️ 问题分析</h3>
            <p>虽然100%还原了经典俄罗斯方块的音效，但发现以下问题：</p>
            <ul>
                <li><strong>音效过于刺耳</strong>: 经典方波音效在现代设备上显得尖锐</li>
                <li><strong>缺乏层次感</strong>: 音效之间缺乏明显的层次区分</li>
                <li><strong>听觉疲劳</strong>: 长时间游戏容易产生听觉疲劳</li>
                <li><strong>现代审美不符</strong>: 不符合现代游戏的音效审美</li>
            </ul>
        </div>

        <!-- 设计参考分析 -->
        <div class="section">
            <h2>🎯 设计参考分析</h2>
            
            <div class="design-grid">
                <div class="design-card">
                    <div class="design-title">🎮 现代俄罗斯方块音效</div>
                    <div class="design-content">
                        <p><strong>参考游戏</strong>: Tetris Effect, Puyo Puyo Tetris</p>
                        <p><strong>特点</strong>: 柔和、层次丰富、现代感</p>
                        <ul>
                            <li>使用正弦波和三角波</li>
                            <li>频率范围更广</li>
                            <li>音量包络更自然</li>
                            <li>音效持续时间适中</li>
                        </ul>
                    </div>
                </div>
                
                <div class="design-card">
                    <div class="design-title">🎵 现代音效设计理念</div>
                    <div class="design-content">
                        <p><strong>设计原则</strong>: 舒适、清晰、有层次</p>
                        <ul>
                            <li>避免刺耳的高频</li>
                            <li>使用自然的音量衰减</li>
                            <li>音效间有明确的层次</li>
                            <li>考虑长时间游戏的舒适性</li>
                        </ul>
                    </div>
                </div>
                
                <div class="design-card">
                    <div class="design-title">🔊 音频心理学</div>
                    <div class="design-content">
                        <p><strong>听觉舒适度</strong>: 基于人耳听觉特性</p>
                        <ul>
                            <li>人耳对2-4kHz最敏感</li>
                            <li>低频音效更有重量感</li>
                            <li>中频音效最舒适</li>
                            <li>高频音效需要适度</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- 新设计方案 -->
        <div class="section">
            <h2>🎨 新音效设计方案</h2>
            
            <div class="success-box">
                <h3>✅ 设计理念</h3>
                <p>在保持经典俄罗斯方块音效特色的基础上，融入现代音效设计理念，创造既经典又舒适的听觉体验。</p>
            </div>

            <div class="comparison-table">
                <thead>
                    <tr>
                        <th>音效类型</th>
                        <th>经典版本</th>
                        <th>新设计方案</th>
                        <th>改进说明</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>移动音效</strong></td>
                        <td>900Hz方波, 60ms</td>
                        <td class="new-design">600Hz正弦波, 80ms</td>
                        <td>降低频率，使用正弦波，更柔和</td>
                    </tr>
                    <tr>
                        <td><strong>旋转音效</strong></td>
                        <td>1100Hz方波, 80ms</td>
                        <td class="new-design">800Hz三角波, 100ms</td>
                        <td>使用三角波，增加持续时间</td>
                    </tr>
                    <tr>
                        <td><strong>锁定音效</strong></td>
                        <td>300Hz三角波, 120ms</td>
                        <td class="new-design">200Hz正弦波, 150ms</td>
                        <td>更低频率，更长的衰减</td>
                    </tr>
                    <tr>
                        <td><strong>消行音效</strong></td>
                        <td>1400Hz方波, 180ms</td>
                        <td class="new-design">1000Hz正弦波→1500Hz, 200ms</td>
                        <td>使用正弦波，更自然的上升</td>
                    </tr>
                    <tr>
                        <td><strong>升级音效</strong></td>
                        <td>600→1800Hz方波, 400ms</td>
                        <td class="new-design">500→1200Hz正弦波, 500ms</td>
                        <td>降低频率范围，延长持续时间</td>
                    </tr>
                    <tr>
                        <td><strong>游戏结束</strong></td>
                        <td>400→100Hz锯齿波, 500ms</td>
                        <td class="new-design">300→80Hz正弦波, 600ms</td>
                        <td>使用正弦波，更自然的下降</td>
                    </tr>
                </tbody>
            </div>
        </div>

        <!-- 音效层次设计 -->
        <div class="section">
            <h2>🎼 音效层次设计</h2>
            
            <div class="design-grid">
                <div class="design-card">
                    <div class="design-title">🔊 音量层次</div>
                    <div class="design-content">
                        <p><strong>移动音效</strong>: 0.2 (最轻)</p>
                        <p><strong>旋转音效</strong>: 0.25 (较轻)</p>
                        <p><strong>锁定音效</strong>: 0.3 (中等)</p>
                        <p><strong>消行音效</strong>: 0.4 (较重)</p>
                        <p><strong>升级音效</strong>: 0.5 (重)</p>
                        <p><strong>游戏结束</strong>: 0.6 (最重)</p>
                    </div>
                </div>
                
                <div class="design-card">
                    <div class="design-title">🎵 频率层次</div>
                    <div class="design-content">
                        <p><strong>低频</strong>: 锁定音效 (200Hz)</p>
                        <p><strong>中低频</strong>: 移动音效 (600Hz)</p>
                        <p><strong>中频</strong>: 旋转音效 (800Hz)</p>
                        <p><strong>中高频</strong>: 消行音效 (1000-1500Hz)</p>
                        <p><strong>高频</strong>: 升级音效 (500-1200Hz)</p>
                        <p><strong>超低频</strong>: 游戏结束 (300-80Hz)</p>
                    </div>
                </div>
                
                <div class="design-card">
                    <div class="design-title">⏱️ 时间层次</div>
                    <div class="design-content">
                        <p><strong>短促</strong>: 移动音效 (80ms)</p>
                        <p><strong>中等</strong>: 旋转音效 (100ms)</p>
                        <p><strong>较长</strong>: 锁定音效 (150ms)</p>
                        <p><strong>长</strong>: 消行音效 (200ms)</p>
                        <p><strong>很长</strong>: 升级音效 (500ms)</p>
                        <p><strong>最长</strong>: 游戏结束 (600ms)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 技术实现方案 -->
        <div class="section">
            <h2>🔧 技术实现方案</h2>
            
            <div class="warning-box">
                <h3>⚡ 关键要求：低延迟同步</h3>
                <p><strong>音效和操作必须保持完美同步，延迟要尽可能低！</strong></p>
                <ul>
                    <li>使用 <code>requestAnimationFrame</code> 确保音效在下一帧播放</li>
                    <li>AudioContext 配置为 <code>latencyHint: 'interactive'</code></li>
                    <li>音效生成和播放分离，预先生成音效</li>
                    <li>使用精确的时间戳控制播放时机</li>
                    <li>避免阻塞主线程的音效处理</li>
                </ul>
            </div>
            
            <div class="code-block">
                // 新音效设计方案 - 舒适版 + 低延迟
                const COMFORTABLE_SOUNDS = {
                    move: {
                        waveform: 'sine',
                        frequency: 600,      // 600Hz正弦波
                        duration: 0.08,      // 80ms
                        volume: 0.2,
                        envelope: 'natural',
                        latency: 0.001       // 1ms延迟
                    },
                    rotate: {
                        waveform: 'triangle',
                        frequency: 800,      // 800Hz三角波
                        duration: 0.1,       // 100ms
                        volume: 0.25,
                        envelope: 'natural',
                        latency: 0.001       // 1ms延迟
                    },
                    lock: {
                        waveform: 'sine',
                        frequency: 200,      // 200Hz正弦波
                        duration: 0.15,      // 150ms
                        volume: 0.3,
                        envelope: 'slow',
                        latency: 0.002       // 2ms延迟
                    },
                    line: {
                        waveform: 'sine',
                        frequency: [1000, 1500], // 上升音效
                        duration: 0.2,       // 200ms
                        volume: 0.4,
                        envelope: 'rising',
                        latency: 0.002       // 2ms延迟
                    },
                    levelup: {
                        waveform: 'sine',
                        frequency: [500, 800, 1200], // 上升音阶
                        duration: 0.5,       // 500ms
                        volume: 0.5,
                        envelope: 'complex',
                        latency: 0.005       // 5ms延迟
                    },
                    gameover: {
                        waveform: 'sine',
                        frequency: [300, 200, 80], // 下降音效
                        duration: 0.6,       // 600ms
                        volume: 0.6,
                        envelope: 'falling',
                        latency: 0.005       // 5ms延迟
                    }
                };

                // 低延迟音频上下文配置
                const AUDIO_CONFIG = {
                    latencyHint: 'interactive',  // 交互式低延迟
                    sampleRate: 44100,           // 标准采样率
                    bufferSize: 256,             // 小缓冲区
                    channels: 1                  // 单声道减少延迟
                };

                // 音效播放优化
                function playSoundOptimized(type) {
                    requestAnimationFrame(() => {
                        const startTime = audioContext.currentTime + 0.001; // 1ms后播放
                        generateAndPlaySound(type, startTime);
                    });
                }
            </div>
        </div>

        <!-- 设计优势 -->
        <div class="section">
            <h2>🌟 新设计方案优势</h2>
            
            <div class="design-grid">
                <div class="design-card">
                    <div class="design-title">👂 听觉舒适度</div>
                    <div class="design-content">
                        <ul>
                            <li>避免刺耳的方波音效</li>
                            <li>使用更自然的正弦波和三角波</li>
                            <li>降低高频成分，减少听觉疲劳</li>
                            <li>更长的衰减时间，音效更自然</li>
                        </ul>
                    </div>
                </div>
                
                <div class="design-card">
                    <div class="design-title">🎵 音效层次</div>
                    <div class="design-content">
                        <ul>
                            <li>清晰的音量层次区分</li>
                            <li>合理的频率分布</li>
                            <li>不同的持续时间设计</li>
                            <li>音效间有明确的角色定位</li>
                        </ul>
                    </div>
                </div>
                
                <div class="design-card">
                    <div class="design-title">🎮 游戏体验</div>
                    <div class="design-content">
                        <ul>
                            <li>保持经典音效的识别性</li>
                            <li>增强游戏的沉浸感</li>
                            <li>适合长时间游戏</li>
                            <li>符合现代游戏审美</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- 实施计划 -->
        <div class="section">
            <h2>📋 实施计划</h2>
            
            <div class="highlight">
                <h3>🚀 实施步骤</h3>
                <ol>
                    <li><strong>第一阶段</strong>: 实现基础音效参数调整</li>
                    <li><strong>第二阶段</strong>: 优化音量包络和衰减</li>
                    <li><strong>第三阶段</strong>: 调整播放时机和间隔</li>
                    <li><strong>第四阶段</strong>: 测试和微调</li>
                    <li><strong>第五阶段</strong>: 最终验证和确认</li>
                </ol>
            </div>
        </div>

        <div class="info-box">
            <h3>💡 设计理念总结</h3>
            <p>新设计方案在保持经典俄罗斯方块音效特色的基础上，融入现代音效设计理念，创造既经典又舒适的听觉体验。通过使用更自然的波形、合理的频率分布、清晰的层次设计，让音效既好听又实用。</p>
        </div>
    </div>
</body>
</html>
