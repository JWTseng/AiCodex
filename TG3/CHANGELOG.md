# Tetris World 更新日志

## v3.1.0 "Modern Mechanics" - 2025-08-18

### 🆕 主要新功能

- **现代化架构重构**  
  采用 TypeScript + Vite 构建系统，模块化核心游戏逻辑

- **完整测试套件**  
  43个单元测试覆盖核心模块，确保代码质量

- **延长锁定延迟系统**  
  方块着地后500ms延迟锁定，支持最多15次移动/旋转重置

- **SRS超级旋转系统**  
  支持Wall Kick踢墙旋转，现代俄罗斯方块标准操作

- **7-Bag随机算法**  
  每7个方块确保7种类型各出现一次，更公平的游戏体验

- **无限旋转机制**  
  着地状态下可持续旋转，支持T-Spin等高级技巧

- **T-Spin识别奖励**  
  T-Spin Single/Double/Triple自动识别，分数倍数奖励

- **Back-to-Back连击**  
  连续Tetris或T-Spin获得1.5倍分数奖励

- **经典复古体验**  
  默认采用经典NES随机算法，保持原汁原味的俄罗斯方块体验

- **测试工具集**  
  内置T-Spin、Back-to-Back等功能测试工具，开发调试利器

- **现代竞技键位标准**  
  采用WASD风格控制：A/D移动，Q/E旋转，S软降，Space硬降，P暂停

### ⚡ 改进功能

- **高级连击系统**  
  3秒连击窗口，最高2倍分数乘数，支持压哨特效

- **7位数分数系统**  
  最高分数提升至9,999,999分，更具挑战性

- **全球排行榜**  
  实时云端排行榜，与全球玩家竞技

- **多输入设备支持**  
  键盘、游戏手柄、触觉反馈全面支持

- **响应式设计**  
  完美适配桌面、平板、手机等多种设备

### 🔧 优化改进

- 操作手感全面升级，旋转成功率提升80%
- 游戏公平性优化，减少坏运气情况（7-Bag算法）
- 高级技巧支持，T-Spin等现代竞技玩法
- 容错机制增强，延长锁定时间降低挫败感
- 分数系统现代化，Back-to-Back连击奖励
- 优化音频系统，减少延迟和卡顿
- 改进iPad自动缩放，提升移动端体验
- 增强玩家名称管理和Top50状态显示
- 完善多语言本地化支持
- 添加实时延迟监控和性能优化
- 设置界面简化，专注于玩家名称管理
- 代码质量提升，模块化架构便于维护
- 键盘控制优化，主要键位与显示完全一致，保留方向键兼容
- 人体工程学改进，WASD布局符合现代游戏习惯

### 🐛 Bug修复

- 修复音频在某些浏览器中失效的问题
- 解决方块旋转时的边界检测错误
- 修复连击计时器的同步问题
- 优化分数提交的网络错误处理
- 改进游戏状态的持久化存储
- 修复测试环境中的模块导入问题
- 解决Vite构建时的类型检查错误
- 修复设置界面布局在移动端的显示问题
- 优化方块生成算法的随机种子问题
- 修复Back-to-Back状态的重置逻辑

### ⚠️ 破坏性变更

- 移除对旧版浏览器的支持（需要ES2020+）
- 更新API接口，旧版本数据可能需要迁移
- 游戏机制变更，现代模式下的分数计算方式调整
- 方块生成算法改变，影响游戏策略和难度感知

---

## v3.0.0 "Enhanced Experience" - 2025-08-15

### 🆕 主要新功能

- **高级连击系统**  
  3秒连击窗口，最高2倍分数乘数，支持压哨特效

- **7位数分数系统**  
  最高分数提升至9,999,999分，UI适配更宽分数显示

- **全球排行榜系统**  
  实时云端排行榜，与全球玩家竞技，支持Top50状态显示

- **Beta功能预览**  
  添加?beta=1参数体验最新实验功能

- **多语言本地化**  
  浏览器语言检测，本地化座右铭和界面文本

### ⚡ 改进功能

- **多输入设备支持**  
  键盘、游戏手柄、触觉反馈全面支持

- **响应式设计优化**  
  iPad自动缩放80%，完美适配多种设备

### 🔧 优化改进

- 优化音频系统，减少iOS设备延迟和卡顿
- 改进iPad触摸解锁和自动缩放体验
- 增强玩家名称管理和验证机制
- 完善输入事件处理，支持preventDefault
- 添加实时延迟监控和性能优化
- 优化分数提交的网络错误处理
- 改进UI响应性和视觉效果

### 🐛 Bug修复

- 修复音频在iOS设备中的初始化问题
- 解决iPad上的音频解锁触发机制
- 修复空格键和方向键的事件冲突
- 优化移动端触摸事件处理
- 修复分数显示的数字格式问题
- 解决排行榜加载的竞态条件
- 修复玩家名称验证的边界情况

---

## v2.1.0 - 2025-06-15

### 🆕 主要新功能

- **音频系统重构**  
  全新音频管理系统，实时延迟调整

### 🔧 优化改进

- 改进游戏性能和稳定性
- 优化用户界面响应速度

### 🐛 Bug修复

- 修复音频播放内存泄漏
- 解决高分保存的竞态条件