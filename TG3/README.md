# 经典NES俄罗斯方块 - 忠实复刻版

## 项目概述

这是一个忠实复刻1989年任天堂娱乐系统(NES)北美(NTSC)版《俄罗斯方块》的网页游戏。项目严格按照原版游戏的物理机制、时序系统和得分公式进行开发，旨在重现原版游戏的独特"手感"和游戏体验。

## 核心特性

### 🎮 精确的NES机制复刻

- **任天堂旋转系统(NRS)**: 无墙踢机制，方块旋转后立即锁定
- **精确的重力表**: 基于帧的计时系统，重现原版难度曲线
- **DAS系统**: 16帧初始延迟，6帧重复速率的延迟自动位移
- **ARE延迟**: 基于锁定高度的可变进场延迟
- **NES随机数生成器**: 带有轻微防重复机制的独特RNG

### 🎯 原始得分系统

- **消行得分**: 40/100/300/1200 × (等级+1)
- **软降得分**: 每下降一格1分
- **等级提升**: 每消除10行提升1级
- **最大分数**: 999,999分

### 🎨 复古视觉设计

- **NES调色板**: 基于模拟信号的精确颜色还原
- **像素艺术风格**: 12×12像素方块，保持原版比例
- **256×240分辨率**: 忠实还原NES原生分辨率
- **复古UI**: 像素字体和经典界面布局

### 🎵 音频系统

- **NES音效**: 基于Ricoh 2A03芯片的chiptune音效
- **经典配乐**: 包含原版音乐曲目
- **实时音效**: 方块移动、旋转、锁定、消行等音效
- **背景音乐**: 循环播放的chiptune风格音乐
- **音量控制**: 独立的主音量、音乐音量、音效音量控制
- **音频开关**: 可单独开启/关闭音乐和音效

## 控制说明

| 按键 | 功能 |
|------|------|
| ← → | 左右移动 |
| ↓ | 软降 |
| A | 顺时针旋转 |
| B | 逆时针旋转 |
| Enter | 暂停/继续 |
| Space | 切换NEXT预览 |

## 技术规格

### 游戏区域
- **尺寸**: 10×20网格
- **方块大小**: 12×12像素
- **缓冲区**: 上方不可见区域用于方块生成

### 时序系统
- **游戏频率**: 60 FPS
- **重力表**: 0级48帧/格到29+级1帧/格
- **DAS延迟**: 16帧初始，6帧重复
- **ARE延迟**: 10-18帧(基于高度)

### 方块系统
- **七种方块**: I, O, T, S, Z, J, L
- **旋转系统**: 任天堂旋转系统(无墙踢)
- **生成位置**: 精确的初始坐标

## 游戏模式

### A型模式(马拉松)
- 目标: 获得最高分数
- 等级提升: 每10行消除
- 游戏结束: 方块堆满

### B型模式(25行挑战)
- 目标: 消除25行
- 可选初始等级
- 恒定速度

## 安装与运行

1. 克隆或下载项目文件
2. 在浏览器中打开 `index.html`
3. 点击"开始游戏"按钮开始游戏

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 项目文件结构

```
TG3/
├── index.html          # 主HTML文件
├── tetris.js           # 核心游戏引擎
├── audio.js            # 音频管理器
├── styles.css          # 复古风格CSS
├── start.html          # 启动页面
├── audio-test.html     # 音频测试页面
├── test.html           # 功能测试页面
├── debug.html          # 调试页面
├── FIXES.md            # 修复说明文档
└── README.md           # 项目说明文档
```

## 开发说明

### 核心类: NESTetris

游戏引擎采用面向对象设计，主要包含以下模块：

- **状态管理**: 游戏状态、分数、等级跟踪
- **物理引擎**: 重力、碰撞检测、方块移动
- **输入系统**: 键盘事件处理、DAS系统
- **渲染系统**: Canvas绘制、UI更新
- **时序系统**: 基于帧的精确计时

### 关键算法

1. **NES RNG**: 线性同余生成器，带防重复机制
2. **重力计算**: 基于等级表的帧计数系统
3. **碰撞检测**: 精确的边界和重叠检测
4. **消行算法**: 高效的行清除和下落处理

## 历史背景

原版NES《俄罗斯方块》于1989年发布，由任天堂开发。游戏以其独特的物理机制和难度曲线著称，成为了经典游戏的标杆。本复刻项目旨在保持原版游戏的"缺陷"作为特色，包括：

- 无硬降功能
- 无墙踢机制
- 非线性难度曲线
- 特定的随机数生成器行为

## 贡献

欢迎提交问题报告和改进建议。请确保任何修改都符合原版游戏的机制规范。

## 许可证

本项目仅供学习和研究使用。

---

*"拥抱NES时代的限制，重现1989年的经典体验"*
